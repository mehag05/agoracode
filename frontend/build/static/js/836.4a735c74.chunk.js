"use strict";(self.webpackChunkagora_frontend=self.webpackChunkagora_frontend||[]).push([[836],{1836:(e,l,s)=>{s.r(l),s.d(l,{default:()=>p});var t=s(9643),r=s(9204),a=s(3159),i=s(6507);const o=e=>{let{product:l,user:s}=e;const{addItem:o}=(0,a._)(),[d,n]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{if(d){const e=setTimeout((()=>{n(!1)}),2e3);return()=>clearTimeout(e)}}),[d]),(0,i.jsx)(r.$,{onClick:()=>{console.log(l.user),console.log(s.supertokens_id),o(l,s.supertokens_id),n(!0)},size:"lg",className:(0,r.r)({variant:"bigpurple"})+" w-full",children:d?"Added!":"Add to cart"})};var d=s(819),n=s(1526),c=s(957),m=s(510),u=s(7192),g=s(3231),x=s(8312),h=s(5414);const v=[{value:"clothing-item",label:"Clothing Item"},{value:"accessories",label:"Accessories"},{value:"dorm-item",label:"Dorm Item"},{value:"shoes",label:"Shoes"},{value:"event-ticket",label:"Event Ticket"},{value:"other",label:"Other"},{value:"lease",label:"Lease"}],f=[{id:1,name:"Home",href:"/"},{id:2,name:"Products",href:"/products"}],p=()=>{const{id:e}=(0,u.g)(),[l,s]=t.useState(null),[a,p]=t.useState(!0),[j,N]=t.useState(!1),[b,w]=t.useState(null),{user:y,loading:k,error:A}=(0,x.Q)();t.useEffect((()=>{const l=new AbortController;return(async()=>{console.log(`Fetching product with ID: ${e}`);try{const l=await g.A.get(`http://localhost:3001/api/product/${e}`);200===l.status&&l.data?s(l.data):N(!0)}catch(b){console.error("Error fetching product:",b),w("Error fetching the product. Please try again later."),N(!0)}finally{p(!1)}})(),()=>{l.abort()}}),[e]);const S=(0,t.useMemo)((()=>{var e;return null===(e=v.find((e=>{let{value:s}=e;return s===(null===l||void 0===l?void 0:l.category)})))||void 0===e?void 0:e.label}),[null===l||void 0===l?void 0:l.category]),C=(0,t.useMemo)((()=>l&&l.images?l.images.map((e=>"string"===typeof e.image?e.image:e.image.url)).filter(Boolean):[]),[l]);return a||k?(0,i.jsx)("div",{children:(0,i.jsx)(h.A,{})}):j?(0,i.jsx)("div",{children:b||"Product not found."}):(0,i.jsxs)(n.A,{className:"bg-white",children:[(0,i.jsx)("div",{className:"bg-white",children:(0,i.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-16 sm:px-6 sm:py-24 lg:grid lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8",children:[(0,i.jsxs)("div",{className:"lg:max-w-lg lg:self-end",children:[(0,i.jsx)("ol",{className:"flex items-center space-x-2",children:f.map(((e,l)=>(0,i.jsx)("li",{children:(0,i.jsxs)("div",{className:"flex items-center text-sm",children:[(0,i.jsx)("a",{href:e.href,className:"font-medium text-sm text-muted-foreground hover:text-gray-900",children:e.name}),l!==f.length-1?(0,i.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",className:"ml-2 h-5 w-5 flex-shrink-0 text-gray-300",children:(0,i.jsx)("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}):null]})},e.href)))}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:null===l||void 0===l?void 0:l.name})}),(0,i.jsxs)("section",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:l?(0,m.$)(l.price):"N/A"}),(0,i.jsx)("div",{className:"ml-4 border-l text-muted-foreground border-gray-300 pl-4",children:S||"N/A"}),"clothing-item"===(null===l||void 0===l?void 0:l.category)&&(null===l||void 0===l?void 0:l.size)&&(0,i.jsxs)("div",{className:"ml-4 border-l text-muted-foreground border-gray-300 pl-4",children:["Size: ",l.size]})]}),(0,i.jsx)("div",{className:"mt-4 space-y-6",children:(0,i.jsx)("p",{className:"text-base text-muted-foreground",children:null===l||void 0===l?void 0:l.description})})]})]}),(0,i.jsx)("div",{className:"mt-10 lg:col-start-2 lg:row-span-2 lg:mt-0 lg:self-center",children:(0,i.jsx)("div",{className:"aspect-square rounded-lg",children:(0,i.jsx)(d.A,{urls:C})})}),(0,i.jsx)("div",{className:"mt-10 lg:col-start-1 lg:row-start-2 lg:max-w-lg lg:self-start",children:(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"mt-10",children:l&&y&&(0,i.jsx)(o,{product:l,user:y})})})}),(0,i.jsx)("div",{className:"mt-10 lg:col-start-1 lg:row-start-2 lg:max-w-lg lg:self-start",children:(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"mt-10",children:!y&&(0,i.jsx)(r.$,{variant:"bigpurple",onClick:()=>window.location.href="/auth/signin",children:"Sign in to add to cart"})})})})]})}),(0,i.jsx)(c.A,{href:"/products",title:`Similar ${S}`,subtitle:`Browse Similar ${S} just like '${null===l||void 0===l?void 0:l.name}'`,textColor:"gray"})]})}}}]);
//# sourceMappingURL=836.4a735c74.chunk.js.map