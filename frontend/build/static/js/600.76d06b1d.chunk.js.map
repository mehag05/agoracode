{"version":3,"file":"static/js/600.76d06b1d.chunk.js","mappings":"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","sources":["../../node_modules/lucide-react/src/icons/loader-circle.ts","../../node_modules/@stripe/stripe-js/dist/index.mjs","components/CheckoutButton.tsx","pages/CartPage.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"4.3.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function () {\n    reject(new Error('Failed to load Stripe.js'));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise[\"catch\"](function (error) {\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise$1;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise$1) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n  return stripePromise$1;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import React from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Button } from './ui/button';\nimport axios from 'axios';\nimport { FetchUser } from '../utils/fetchUser';\nimport { IUser } from '../schema/user';\nimport { IProduct } from '../schema/Product';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY!);\n\nconst CheckoutButton = ({ items }: { items: any[] }) => {\n    const { user, loading, error }: { user: IUser, loading: boolean, error: any } = FetchUser();\n    const navigate = useNavigate(); // Initialize useNavigate\n\n    const handleCheckout = async () => {\n        // Check if there are multiple items in the cart\n        if (items.length > 1) {\n            window.alert('You can only check out one item at a time. Happy Shopping!');\n            return; // Exit the function\n        }\n\n        // Check if the user is logged in\n        if (!user) {\n            // Redirect to the sign-in page if not logged in\n            navigate('/auth/signin');\n            window.alert('Please sign in to checkout!');\n            return; // Exit the function\n        }\n\n        const stripe = await stripePromise;\n        console.log('Items:', items);\n\n        const itemsToCheckout = items!.map((item: any) => ({\n            name: item.product.name,\n            image: item.product.images[0].image,\n            description: item.product._id,\n            price: item.product.price * 100, // Ensure this is in cents\n            quantity: 1, // Assuming one of each product\n        }));\n\n        console.log('Items to send:', itemsToCheckout); // Log the items being sent\n        console.log('User ID:', user.supertokens_id); // Log the user ID to check its value\n\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/api/create-checkout-session`, {\n                items: itemsToCheckout,\n                user: user.supertokens_id, // Ensure user is included\n            });\n\n            const session = response.data; // Capture the response data\n\n            // Check if session is defined and has an id\n            if (session && session.id) {\n                const result = await stripe!.redirectToCheckout({ sessionId: session.id });\n                if (result.error) {\n                    console.error(result.error.message);\n                }\n            } else {\n                console.error('Session ID not returned or session is undefined', session);\n            }\n        } catch (error) {\n            if (axios.isAxiosError(error)) {\n                console.error('Failed to create checkout session:', error.response?.data || error.message);\n            } else {\n                console.error('Unexpected error:', error);\n            }\n        }\n    };\n\n    return (\n        <Button variant='bigpurple' onClick={handleCheckout}>\n            Checkout\n        </Button>\n    );\n}\n\nexport default CheckoutButton;","'use client'\nimport React from 'react'\nimport { Button } from '../components/ui/button'\nimport { PRODUCT_CATEGORIES } from '../config/config'\nimport { useCart } from '../hooks/useCart'\nimport { cn, formatPrice } from '../lib/utils'\nimport { Loader2, X } from 'lucide-react'\nimport { useEffect, useState } from 'react'\nimport CheckoutButton from '../components/CheckoutButton'\nimport { ImageIcon } from 'lucide-react'\nimport { IProduct } from 'schema/Product'\nimport axios from 'axios'\n\nconst CartPage = () => {\n  const { items, removeItem } = useCart()\n\n  const [isMounted, setIsMounted] = useState<boolean>(false)\n  const [errorMessage, setErrorMessage] = useState<string | null>(null); // Add state for error message\n\n  useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  const cartTotal = items.reduce(\n    (total, { product }) => total + product.price,\n    0\n  )\n  // if any items in cart are sold or delivered, give the user an alert and remove those item(s) from cart\n  // test\n  useEffect(() => {\n    const abortController = new AbortController(); // Create an AbortController instance\n    const checkProductAvailability = async () => { // Move the function inside useEffect\n      const unavailableItems: string[] = [];\n\n      for (const { product } of items) {\n          const response = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/api/product/${product._id}`);\n          const currentProduct: IProduct = response.data;\n\n          if (currentProduct.approvedForSale === 'sold' || currentProduct.approvedForSale === 'delivered') {\n              unavailableItems.push(currentProduct.name);\n          }\n      }\n\n      if (unavailableItems.length > 0) {\n          setErrorMessage(`These items are not in stock: ${unavailableItems.join(', ')}`); // Set error message\n          console.log(unavailableItems);\n          removeUnavailableItems(unavailableItems); // Call to remove unavailable items\n      } else {\n          setErrorMessage(null); // Clear error message if all items are available\n      }\n\n      return unavailableItems;\n    };\n\n    checkProductAvailability(); // Call the function to check product availability\n\n    return () => {\n      abortController.abort(); // Cleanup function to abort the request\n    };\n  }, [items]); // Ensure it runs when items change\n\n  const removeUnavailableItems = (unavailableItems: string[]) => {\n    unavailableItems.forEach(itemName => {\n      const itemToRemove = items.find(({ product }) => product.name === itemName);\n      if (itemToRemove) {\n        removeItem(itemToRemove.product.id); // Remove item from cart\n      }\n    });\n  };\n\n  return (\n    <div className='bg-white'>\n      {errorMessage && <div className='text-red-500'>{errorMessage}</div>}\n      <div className='mx-auto max-w-2xl px-4 pb-24 pt-16 sm:px-6 lg:max-w-7xl lg:px-8'>\n        <h1 className='text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl'>\n          Shopping Cart\n        </h1>\n\n        <div className='mt-12 lg:grid lg:grid-cols-12 lg:items-start lg:gap-x-12 xl:gap-x-16'>\n          <div\n            className={cn('lg:col-span-7', {\n              'rounded-lg border-2 border-dashed border-zinc-200 p-12':\n                isMounted && items.length === 0,\n            })}>\n            <h2 className='sr-only'>\n              Items in your shopping cart\n            </h2>\n\n            {isMounted && items.length === 0 ? (\n              <div className='flex h-full flex-col items-center justify-center space-y-1'>\n                <div\n                  aria-hidden='true'\n                  className='relative mb-4 h-40 w-40 text-muted-foreground'>\n                  <img\n                    src='/empty-cart.png'\n                    width={100}\n                    height={100}\n                    loading='eager'\n                    alt='empty shopping cart'\n                  />\n                </div>\n                <h3 className='font-semibold text-2xl'>\n                  Your cart is empty\n                </h3>\n                <p className='text-muted-foreground text-center'>\n                  Whoops! nothing to show here yet.\n                </p>\n              </div>\n            ) : null}\n\n            <ul\n              className={cn({\n                'divide-y divide-gray-200 border-b border-t border-gray-200':\n                  isMounted && items.length > 0,\n              })}>\n              {isMounted &&\n                items.map(({ product }) => {\n                  const label = PRODUCT_CATEGORIES.find(\n                    (c) => c.value === product.category\n                  )?.label\n\n                  return (\n                    <li\n                      key={product.id}\n                      className='flex py-6 sm:py-10'>\n                      <div className='flex-shrink-0'>\n                        <div className='relative h-24 w-24'>\n                          {product.images[0]?.image ? ( // Check if the image exists\n                            <img\n                              width={100}\n                              height={100}\n                              src={product.images[0].image} // Use the image URL directly\n                              alt='product image'\n                              className='h-full w-full rounded-md object-cover object-center'\n                            />\n                          ) : (\n                            <div className='flex h-full items-center justify-center bg-secondary'>\n                              <ImageIcon\n                                aria-hidden='true'\n                                className='h-4 w-4 text-muted-foreground'\n                              />\n                            </div>\n                          )}\n                        </div>\n                      </div>\n\n                      <div className='ml-4 flex flex-1 flex-col justify-between sm:ml-6'>\n                        <div className='relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0'>\n                          <div>\n                            <div className='flex justify-between'>\n                              <h3 className='text-sm'>\n                                <a\n                                  href={`/product/${product.id}`}\n                                  className='font-medium text-gray-700 hover:text-gray-800'>\n                                  {product.name}\n                                </a>\n                              </h3>\n                            </div>\n\n                            <div className='mt-1 flex text-sm'>\n                              <p className='text-muted-foreground'>\n                                Category: {label}\n                              </p>\n                            </div>\n\n                            <p className='mt-1 text-sm font-medium text-gray-900'>\n                              {formatPrice(product.price)}\n                            </p>\n                          </div>\n\n                          <div className='mt-4 sm:mt-0 sm:pr-9 w-20'>\n                            <div className='absolute right-0 top-0'>\n                              <Button\n                                aria-label='remove product'\n                                onClick={() =>\n                                  removeItem(product.id)\n                                }\n                                variant='ghost'>\n                                <X\n                                  className='h-5 w-5'\n                                  aria-hidden='true'\n                                />\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n\n                      </div>\n                    </li>\n                  )\n                })}\n            </ul>\n          </div>\n\n          <section className='mt-16 rounded-lg bg-gray-50 px-4 py-6 sm:p-6 lg:col-span-5 lg:mt-0 lg:p-8'>\n            <h2 className='text-lg font-medium text-gray-900'>\n              Order summary\n            </h2>\n\n            <div className='mt-6 space-y-4'>\n              <div className='flex items-center justify-between'>\n                <p className='text-sm text-gray-600'>\n                  Subtotal\n                </p>\n                <p className='text-sm font-medium text-gray-900'>\n                  {isMounted ? (\n                    formatPrice(cartTotal)\n                  ) : (\n                    <Loader2 className='h-4 w-4 animate-spin text-muted-foreground' />\n                  )}\n                </p>\n              </div>\n\n              <div className='flex items-center justify-between'>\n                <p className='text-sm text-gray-600'>\n                  Tax\n                </p>\n                <p className='text-sm font-medium text-gray-900'>\n                  Calculated at checkout\n                </p>\n              </div>\n\n              <div className='flex items-center justify-between border-t border-gray-200 pt-4'>\n                <div className='text-base font-medium text-gray-900'>\n                  Order Total\n                </div>\n                <div className='text-base font-medium text-gray-900'>\n                  {isMounted ? (\n                    formatPrice(cartTotal)\n                  ) : (\n                    <Loader2 className='h-4 w-4 animate-spin text-muted-foreground' />\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className='mt-6'>\n              <CheckoutButton items={items} />\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default CartPage"],"names":["LoaderCircle","createLucideIcon","d","key","stripePromise$1","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","injectScript","params","queryString","advancedFraudSignals","script","document","createElement","src","concat","headOrBody","head","body","Error","appendChild","stripePromise","onErrorListener","onLoadListener","loadScript","Promise","resolve","reject","window","Stripe","console","warn","scripts","querySelectorAll","i","length","test","findScript","_script$parentNode","removeEventListener","parentNode","removeChild","onLoad","onError","addEventListener","error","loadCalled","getStripePromise","then","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","loadStripe","process","_ref","items","user","loading","FetchUser","navigate","useNavigate","_jsx","Button","variant","onClick","async","alert","log","itemsToCheckout","map","item","product","image","images","description","_id","price","quantity","supertokens_id","session","axios","post","data","id","result","redirectToCheckout","sessionId","message","_error$response","isAxiosError","response","children","CartPage","removeItem","useCart","isMounted","setIsMounted","useState","errorMessage","setErrorMessage","useEffect","cartTotal","reduce","total","abortController","AbortController","unavailableItems","currentProduct","get","approvedForSale","push","join","removeUnavailableItems","checkProductAvailability","abort","forEach","itemName","itemToRemove","find","_ref2","_jsxs","className","cn","width","height","alt","_ref3","_PRODUCT_CATEGORIES$f","_product$images$","label","PRODUCT_CATEGORIES","c","value","category","ImageIcon","href","formatPrice","X","Loader2","CheckoutButton"],"sourceRoot":""}